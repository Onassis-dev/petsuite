---
import UGCLayout from "@/layouts/UGCLayout.astro";
import { MainUGC } from "@workspace/ui/components/ugc/MainUGC";

const { slug } = Astro.params;

let website: any;

try {
  const response = await fetch(
    `${import.meta.env.API_ORIGIN}/public/website?slug=${slug}`
  );
  if (!response.ok) throw new Error("Website not found");
  website = await response.json();
} catch (error) {
  console.error(error);
  return Astro.rewrite("/es");
}
---

<UGCLayout website={website}>
  <MainUGC
    client:load
    website={website}
    apiOrigin={import.meta.env.API_ORIGIN}
    slug={slug!}
  />
</UGCLayout>
